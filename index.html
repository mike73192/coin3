<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>コイン瓶ミニゲーム</title>
    <link rel="stylesheet" href="/src/styles/main.css" />
  </head>
  <body>
    <div id="app">
      <div id="game-container"></div>
      <aside id="ui-panel" class="panel">
        <nav class="tab-nav" aria-label="サイドパネル切り替え">
          <button id="tab-home" type="button" class="tab-button active" aria-pressed="true">記録</button>
          <button id="tab-settings" type="button" class="tab-button" aria-pressed="false">設定</button>
        </nav>
        <div id="home-view" class="panel-view">
          <section class="status-block">
            <h1>コインの記録</h1>
            <p class="hint" id="hint-text">今日も少しずつ積み上げましょう。</p>
            <div class="counter">
              <span>現在の枚数</span>
              <strong id="coin-count">0</strong>
              <span class="separator">/ <span id="capacity-count">100</span></span>
            </div>
            <button id="record-button" class="primary">記録</button>
            <button id="download-log-button" class="ghost">ログを保存</button>
          </section>
          <section class="shelf-block">
            <div class="shelf-header">
              <h2>棚の成果</h2>
              <div class="pager">
                <button id="shelf-prev" class="ghost" aria-label="前のページ">◀</button>
                <span id="shelf-page">1 / 1</span>
                <button id="shelf-next" class="ghost" aria-label="次のページ">▶</button>
              </div>
            </div>
            <div id="shelf-grid" class="shelf-grid"></div>
          </section>
        </div>
        <div id="settings-view" class="panel-view hidden">
          <section class="settings-block">
            <h2>基本設定</h2>
            <p class="settings-intro">瓶やコインの挙動をお好みに合わせて調整できます。</p>
            <form id="settings-form" class="settings-form">
              <label class="field">
                <span>瓶の容量</span>
                <input id="settings-capacity" type="number" min="20" max="500" step="10" />
                <small>20〜500枚の範囲で設定できます。</small>
              </label>
              <label class="field range">
                <div class="label-row">
                  <span>コイン投入間隔</span>
                  <span id="settings-drop-label" class="value">90 ms</span>
                </div>
                <input id="settings-drop-interval" type="range" min="30" max="400" step="10" />
              </label>
              <label class="field range">
                <div class="label-row">
                  <span>弾みやすさ</span>
                  <span id="settings-bounce-label" class="value">0.12</span>
                </div>
                <input id="settings-bounce" type="range" min="0" max="0.8" step="0.02" />
              </label>
              <label class="field range">
                <div class="label-row">
                  <span>摩擦</span>
                  <span id="settings-friction-label" class="value">0.45</span>
                </div>
                <input id="settings-friction" type="range" min="0" max="1" step="0.05" />
              </label>
              <label class="field range">
                <div class="label-row">
                  <span>静止摩擦</span>
                  <span id="settings-static-label" class="value">0.90</span>
                </div>
                <input id="settings-static-friction" type="range" min="0" max="1" step="0.05" />
              </label>
            </form>
          </section>
        </div>
      </aside>
    </div>

    <div id="dialog-backdrop" class="dialog-backdrop hidden" role="dialog" aria-modal="true">
      <div class="dialog">
        <header>
          <h2>記録を追加</h2>
        </header>
        <form id="record-form">
          <label class="field">
            <span>タイトル</span>
            <input id="record-title" type="text" placeholder="今日のがんばり" maxlength="32" required />
          </label>
          <div class="field sliders">
            <label>
              <span>効果</span>
              <div class="slider-control">
                <input type="range" min="0" max="100" value="30" data-weight="1.2" />
                <output class="slider-value" data-slider-value>30</output>
              </div>
            </label>
            <label>
              <span>時間</span>
              <div class="slider-control">
                <input type="range" min="0" max="100" value="30" data-weight="1.0" />
                <output class="slider-value" data-slider-value>30</output>
              </div>
            </label>
            <label>
              <span>努力</span>
              <div class="slider-control">
                <input type="range" min="0" max="100" value="30" data-weight="1.5" />
                <output class="slider-value" data-slider-value>30</output>
              </div>
            </label>
          </div>
          <p class="field result">推定コイン：<strong id="record-preview">0枚</strong></p>
          <footer>
            <button type="button" id="dialog-cancel" class="ghost">キャンセル</button>
            <button type="submit" class="primary">記録する</button>
          </footer>
        </form>
      </div>
    </div>

    <div id="full-toast" class="toast hidden">瓶が満杯になりました！棚に保存します。</div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
